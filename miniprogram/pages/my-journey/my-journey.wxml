<!-- æˆ‘çš„æ—…ç¨‹é¡µé¢ -->
<view class="journey-container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-content">
      <text class="header-title">æˆ‘çš„æ—…ç¨‹</text>
      <text class="update-time" wx:if="{{lastUpdateTime}}">æ›´æ–°äºï¼š{{lastUpdateTime}}</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">æ­£åœ¨åŠ è½½é£è¡Œæ•°æ®...</text>
      <text class="loading-subtext">è¯·ç¨å€™ï¼Œæ­£åœ¨è·å–æ‚¨çš„é£è¡Œç»Ÿè®¡ä¿¡æ¯</text>
    </view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view class="error-container" wx:if="{{hasError && !isLoading}}">
    <view class="error-content">
      <text class="error-icon">âš ï¸</text>
      <text class="error-title">æ•°æ®åŠ è½½å¤±è´¥</text>
      <text class="error-message">{{errorMessage}}</text>
      <button class="retry-button" bindtap="onRetryLoad">é‡æ–°åŠ è½½</button>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
  <view class="stats-overview" wx:if="{{!hasError && !isLoading}}">
    <!-- é£æœºé€‰æ‹©å™¨ -->
    <view class="aircraft-selector" wx:if="{{aircraftOptions.length > 1}}">
      <view class="selector-label">é€‰æ‹©é£æœºï¼š</view>
      <picker 
        class="aircraft-picker" 
        mode="selector" 
        range="{{aircraftOptions}}" 
        range-key="name"
        value="{{selectedAircraftIndex}}" 
        bindchange="onAircraftChange">
        <view class="picker-content">
          <text class="selected-aircraft">{{selectedAircraftName}}</text>
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>
    
    <!-- å½“å‰é£æœºç»Ÿè®¡ä¿¡æ¯ -->
    <view class="current-aircraft-info" wx:if="{{selectedAircraftData}}">
      <text class="aircraft-serial">åºåˆ—å·ï¼š{{selectedAircraftData.serialNumber}}</text>
      <text class="aircraft-model">å‹å·ï¼š{{selectedAircraftData.model}}</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{selectedAircraftData ? selectedAircraftData.totalFlights : statistics.totalFlights}}</text>
        <text class="stat-label">æ€»é£è¡Œæ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{selectedAircraftData ? selectedAircraftData.totalHours : statistics.totalHours}}</text>
        <text class="stat-label">æ€»é£è¡Œæ—¶é•¿(å°æ—¶)</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{selectedAircraftData ? selectedAircraftData.monthlyFlights : statistics.currentMonthFlights}}</text>
        <text class="stat-label">æœ¬æœˆé£è¡Œæ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{selectedAircraftData ? selectedAircraftData.monthlyHours : statistics.currentMonthHours}}</text>
        <text class="stat-label">æœ¬æœˆé£è¡Œæ—¶é•¿</text>
      </view>
    </view>
    

    
    <!-- æœ€è¿‘é£è¡Œè®°å½• -->
    <view class="recent-flights" wx:if="{{recentFlightRecords.length > 0}}">
      <view class="recent-flights-header">
        <text class="recent-flights-title">æœ€è¿‘é£è¡Œè®°å½•</text>
      </view>
      <view class="recent-flights-list">
        <view class="recent-flight-item" wx:for="{{recentFlightRecords}}" wx:key="id">
          <view class="flight-info">
            <view class="flight-time-info">
              <text class="time-label">æ—¥æœŸ</text>
              <text class="time-value">{{item.date}}</text>
            </view>
            <view class="flight-time-info">
              <text class="time-label">å¼€å§‹æ—¶é—´</text>
              <text class="time-value">{{item.departureTime || '09:00'}}</text>
            </view>
            <view class="flight-time-info">
              <text class="time-label">ç»“æŸæ—¶é—´</text>
              <text class="time-value">{{item.arrivalTime || '11:30'}}</text>
            </view>
          </view>
          <view class="flight-duration">
            <text class="duration-value">{{item.duration}}</text>
            <text class="duration-unit">å°æ—¶</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆå°±å±•ç¤ºåŒºåŸŸ -->
  <view class="achievements-section" wx:if="{{!hasError && !isLoading && achievements.length > 0}}">
    <view class="section-title">
      <text>æˆ‘çš„é£è¡Œæˆå°±</text>
      <text class="achievement-progress">{{unlockedAchievements}}/{{totalAchievements}}</text>
    </view>
    <view class="achievements-grid">
      <view wx:for="{{achievements}}" wx:key="id" class="achievement-item {{item.achieved ? 'unlocked' : 'locked'}}">
        <view class="achievement-icon">{{item.icon}}</view>
        <view class="achievement-info">
          <view class="achievement-name">{{item.name}}</view>
          <view class="achievement-description">{{item.description}}</view>
          <view class="progress-bar" wx:if="{{!item.achieved}}">
            <view class="progress-fill" style="width: {{item.progress}}%"></view>
          </view>
        </view>
        <view class="achievement-status">{{item.achieved ? 'âœ“' : 'ğŸ”’'}}</view>
      </view>
    </view>
  </view>
  





</view>