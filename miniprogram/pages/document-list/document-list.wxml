<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="header-title">{{category === 'all' ? 'å…¨éƒ¨æ–‡æ¡£' : category}}</view>
    <view class="header-actions">
      <view class="refresh-btn" bindtap="refreshPage">
        <text class="refresh-icon">â†»</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-container">
    <view class="search-bar">
      <text class="search-icon">ğŸ”</text>
      <input type="text" placeholder="æœç´¢æ–‡æ¡£æ ‡é¢˜" value="{{searchQuery}}" bindinput="onSearch" bindconfirm="onSearch"/>
    </view>
  </view>

  <!-- ç­›é€‰åŒºåŸŸï¼ˆæš‚æ—¶éšè—ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªæœºå‹ï¼‰ -->
  <!-- <view class="filter-container">
    <text class="filter-label">æœºå‹ç­›é€‰ï¼š</text>
    <picker bindchange="onAircraftChange" value="{{aircraftModels.indexOf(filterAircraft)}}" range="{{aircraftModels}}">
      <view class="filter-picker">
        {{filterAircraft === 'all' ? 'å…¨éƒ¨æœºå‹' : filterAircraft}}
        <icon type="arrowright" size="12" class="filter-icon"/>
      </view>
    </picker>
  </view> -->

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading && documentList.length === 0}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ–‡æ¡£åˆ—è¡¨ -->
  <view class="document-list" wx:elif="{{documentList.length > 0}}">
    <block wx:for="{{documentList}}" wx:key="id">
      <view class="document-item">
        <!-- æ–‡æ¡£åŸºæœ¬ä¿¡æ¯ -->
        <view class="document-header">
          <view class="document-title">{{item.title}}</view>
          <view class="document-meta">
            <text class="document-version">V{{item.version}}</text>
            <text class="document-size">{{item.fileSize || 'æœªçŸ¥å¤§å°'}}</text>
            <!-- æ–‡æ¡£ç±»å‹æ ‡è¯† -->
            <view class="document-type-tags">
              <text class="type-tag rich-text-tag" wx:if="{{item.content && item.content.includes('<')}}">å¯Œæ–‡æœ¬</text>
              <text class="type-tag attachment-tag" wx:if="{{item.attachments && item.attachments.length > 0}}">é™„ä»¶({{item.attachments.length}})</text>
            </view>
          </view>
        </view>

        <!-- æ–‡æ¡£è¯¦æƒ… -->
        <view class="document-details">
          <view class="detail-row">
            <view class="detail-label">æ‰€å±åˆ†ç±»ï¼š</view>
            <view class="detail-value">{{item.categoryName || 'æœªåˆ†ç±»'}}</view>
          </view>
          <view class="detail-row">
            <view class="detail-label">å‘å¸ƒæ—¥æœŸï¼š</view>
            <view class="detail-value">{{item.publishDate || 'æœªçŸ¥æ—¥æœŸ'}}</view>
          </view>
          <view class="detail-row">
            <view class="detail-label">ä½œè€…ï¼š</view>
            <view class="detail-value">{{item.author || 'æœªçŸ¥ä½œè€…'}}</view>
          </view>
        </view>

        <!-- æ–‡æ¡£ç»Ÿè®¡å’Œæ“ä½œ -->
        <view class="document-footer">
          <view class="document-stats">
            <view class="stat-item">
              <text class="stat-icon">ğŸ‘ï¸</text>
              <text class="stat-text">{{item.views || 0}} æ¬¡æµè§ˆ</text>
            </view>
            <view class="stat-item">
              <text class="stat-icon">ğŸ“¥</text>
              <text class="stat-text">{{item.downloads || 0}} æ¬¡ä¸‹è½½</text>
            </view>
          </view>
          <view class="document-actions">
            <!-- æ¥è‡ªä¿¡æ¯ç®¡ç†é¡µé¢æ—¶æ˜¾ç¤ºç¼–è¾‘å’Œåˆ é™¤æŒ‰é’® -->
            <view wx:if="{{fromManagement}}" class="management-actions">
              <button class="edit-button" bindtap="editDocument" data-id="{{item.id}}" size="mini">ç¼–è¾‘</button>
              <button class="delete-button" bindtap="deleteDocument" data-id="{{item.id}}" size="mini">åˆ é™¤</button>
            </view>
            <!-- æ™®é€šè®¿é—®æ—¶æ˜¾ç¤ºæŸ¥çœ‹è¯¦æƒ…å’Œä¸‹è½½æŒ‰é’® -->
            <view wx:else class="normal-actions">
              <button class="detail-button" bindtap="viewDocumentDetail" data-id="{{item.id}}" size="mini">æŸ¥çœ‹è¯¦æƒ…</button>
              <button class="download-button" bindtap="downloadDocument" data-id="{{item.id}}" size="mini">ä¸‹è½½</button>
            </view>
          </view>
        </view>
      </view>
    </block>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{hasMore && !loading}}">
      <text>ä¸Šæ‹‰åŠ è½½æ›´å¤š</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“„</view>
    <text class="empty-text">æš‚æ— æ–‡æ¡£æ•°æ®</text>
    <text class="empty-subtext">
      {{searchQuery ? 'æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡æ¡£' : 'è¯¥åˆ†ç±»ä¸‹æš‚æ— æ–‡æ¡£'}}
    </text>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view class="footer-tip">
    <text>æ ¹æ®æ‚¨çš„æƒé™æ˜¾ç¤ºå¯è®¿é—®çš„æ–‡æ¡£</text>
  </view>
</view>