# DLE 轻型运动飞机 DL-2L 云雁小程序

这是一个基于微信小程序云开发构建的通用航空服务平台，专为 DLE 轻型运动飞机（DL-2L 云雁）量身定制。平台旨在连接飞机制造商、运营商与机主用户，提供全方位的数字化飞行体验。

## 📋 项目简介

本项目解决了通用航空领域中机主与厂商信息脱节的痛点。通过本小程序：
- **厂商**：高效管理出厂飞机资产、发布技术通告、服务信函及新闻资讯，管理用户权限。
- **机主**：便捷绑定爱机，实时查看飞机状态，获取官方技术文档，记录飞行日志，并解锁飞行成就。

## ✨ 核心功能

### 👤 机主/用户端

1.  **首页 (`pages/index`)**
    *   品牌展示：沉浸式轮播图展示飞机风采。
    *   资讯速览：最新服务通告、新闻动态实时更新。
    *   服务入口：快速联系客服、查看服务特色。

2.  **飞机中心 (`pages/aircraft`, `pages/bind-aircraft`)**
    *   **飞机绑定**：支持通过序列号查询并绑定多架飞机。
    *   **状态监控**：查看飞机的详细信息（注册号、生产年份、累计飞行小时）。
    *   **飞行操作**：模拟开始/结束飞行，实时记录飞行时长。
    *   **机队切换**：支持多架飞机左右滑动切换管理。

3.  **飞行旅程 (`pages/my-journey`, `pages/flight-record`)**
    *   **数据看板**：可视化展示总飞行时长、飞行次数及本月数据。
    *   **飞行日志**：详细记录每一次飞行的起降时间、时长和备注。
    *   **成就系统**：自动统计飞行数据，解锁“首次飞行”、“百小时机长”等荣誉勋章。

4.  **资讯文档 (`pages/documents`, `pages/document-list`)**
    *   **分类浏览**：服务通告、服务信函、新闻资讯、技术手册四大分类。
    *   **权限管控**：敏感技术文档（如服务通告）仅限认证机主查看/下载。
    *   **全文检索**：支持按标题和内容关键词快速检索文档。

5.  **个人中心 (`pages/profile`)**
    *   个人资料管理（头像、昵称、手机号）。
    *   机主认证状态展示。
    *   系统设置与管理员入口。

### 🛠 管理端 (厂商/运营)

1.  **机队资产管理 (`pages/admin`)**
    *   **资产录入**：新增出厂飞机，上传飞机照片，设置初始状态。
    *   **全景概览**：查看所有交付飞机的绑定状态和运营数据。
    *   **资产维护**：编辑或删除飞机信息，处理异常数据。

2.  **内容发布系统 (`pages/info-management`, `pages/document-edit`)**
    *   **富文本编辑**：内置强大的富文本编辑器，支持图文混排。
    *   **附件管理**：支持上传 PDF、图片等多种格式附件，支持多附件管理。
    *   **分类发布**：灵活选择文档分类和可见权限（公开/VIP）。

3.  **用户权限管理 (`pages/user-management`)**
    *   **用户列表**：查看所有注册用户及其认证信息。
    *   **角色分配**：一键提升/降级管理员权限，管理维护团队。
    *   **多维筛选**：按角色、搜索关键词快速定位用户。

## 📂 目录结构

```
d:\kaifa\SOLO trae\
├── cloudfunctions/              # 云函数 (Node.js)
│   ├── addAircraft/             # 添加飞机
│   ├── addFlightRecord/         # 添加飞行记录
│   ├── bindAircraft/            # 绑定飞机逻辑
│   ├── getAchievements/         # 计算飞行成就
│   ├── getAircraftStats/        # 统计飞机数据
│   ├── getDocumentsByCategory/  # 获取文档列表
│   ├── ...                      # 其他 20+ 个业务云函数
│
├── miniprogram/                 # 小程序前端
│   ├── components/              # 公共组件
│   ├── images/                  # 图标与静态资源
│   ├── pages/                   # 页面文件
│   │   ├── aircraft/            # 飞机详情与操作
│   │   ├── admin/               # 管理员后台
│   │   ├── document-edit/       # 文档编辑器
│   │   ├── my-journey/          # 飞行数据可视化
│   │   └── ...                  # 其他页面
│   ├── utils/                   # 工具库
│   ├── app.js                   # 全局入口
│   └── app.json                 # 全局配置
│
└── README.md                    # 项目文档
```

## 🚀 技术栈

*   **前端框架**：微信小程序原生开发 (WXML, WXSS, JavaScript)
*   **后端服务**：微信云开发 (WeChat CloudBase)
    *   **云函数**：处理核心业务逻辑、权限校验、数据聚合。
    *   **云数据库**：MongoDB 风格的 NoSQL 数据库，灵活存储结构化数据。
    *   **云存储**：海量存储飞机高清图、文档附件及用户头像。

## 📝 部署说明

1.  **环境准备**：
    *   下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)。
    *   注册微信小程序账号，并开通云开发环境。

2.  **配置项目**：
    *   导入项目目录到开发者工具。
    *   修改 `project.config.json` 中的 `appid` 为你自己的小程序 AppID。
    *   在 `miniprogram/envList.js` (如有) 或 `app.js` 中配置你的云开发环境 ID。

3.  **部署云资源**：
    *   在开发者工具中右键 `cloudfunctions` 文件夹，选择当前环境。
    *   右键各个云函数文件夹，选择“上传并部署：云端安装依赖”。
    *   在云开发控制台创建以下数据库集合：
        *   `users` (用户信息)
        *   `aircrafts` (飞机资产)
        *   `documents` (资讯文档)
        *   `flight_records` (飞行记录)
        *   `user_aircraft_relations` (绑定关系)

4.  **体验与调试**：
    *   点击“编译”进行预览。
    *   建议使用真机调试以获得最佳体验（特别是文件上传和下载功能）。

---
*Designed & Developed for DLE Aviation*
